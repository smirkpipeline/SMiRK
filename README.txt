SMiRK is an automated pipeline and toolset for analysis of miRNA-seq data.


AUTOMATED PIPELINE

To run SMiRK as an automated pipeline, just run "./SMiRK.bash [input.csv] [group1] [group2]" where input.csv is your table of miRNA counts, in csv format, and group1 and group2 are files containig lists of the members of two groups of samples to compare. The final output will be heatmaps as .png files.

TOOLS

SMiRK consists of several modules, that can be used individually as tools for data analysis. These are described below.

wasp_normalize

This tool normalizes miRNA counts from different libraries. It was originally developed for use on data from the WASP (Wiki-based Automated Sequence Processor)--hence the name--but can be used for correctly-formatted data from any source. 
Run the tool with "java wasp_normalize [input.csv] [input.info.csv]". This requires a .info.csv file, which is automatically generated by smirk.bash. If you want to make one yourself without running smirk.bash, the code is here:
echo "Sample,Total Reads"> [input.info.csv]
head -n1 [input.csv] | tr "," "\n" | awk '(NF>0)' > tmp1
< [input.csv] awk -v FS="," '{for(i=2;i<=NF;i++){sums[i]+=$i}}END{for(i in sums){print sums[i]}}' > tmp2
paste -d"," tmp1 tmp2 >> [input.info.csv]

remove_low.py

This tools removes all low-abundance miRNAs. A low-abundance miRNA is defined as one in which more than half of the samples have less than 10 RPM.

smirk.R
This automatically generates two heatmaps of the data: one in which unupervised hierarchical clustering has been performed, and one in which it has not. If the user has a particular arrangement for the samples and miRNAs, then reordering the input file means that the latter output will reflect their preferences.

significance.R
This takes the samples from the two groups specified and performs the Wilcoxon test to see if a significant difference exists between them. 
